library("pdftools")
temp_file <- tempfile()
download.file("http://www.pnas.org/content/suppl/2015/09/16/1510159112.DCSupplemental/pnas.201510159SI.pdf",
temp_file)
txt <- pdf_text(temp_file)
txt
names(txt)
length(txt)
txt[[1]]
txt[[2]]
tab <- txt[[2]]
tab
library(stringr)
tmp <- str_split(tab, "\n")
tmp
tmp2 <- strsplit(tab, "\n")
tmp2
lenght(tmp)
lenght(tmp)
length(tmp)
tab
tab[[1]]
tab[[2]]
tab
txt <- pdf_text(temp_file)
txt
str(txt)
class(txt)
txt
tab <- txt[2]
tab
tmp <- str_split(tab, "\n")
tmp
tab <- txt[2]
tmp <- str_split(tab, "\n")
tmp2 <- strsplit(tab,"\n")[[1]]
tmp <- str_split(tab, "\n")
tmp2 <- strsplit(tab,"\n")#[[1]]
tmp
length(tmp)
length(tmp2)
tab <- txt[2]
tmp <- str_split(tab, "\n")
tmp2 <- strsplit(tab,"\n")#[[1]]
class(tmp)
tab
tmp <- str_split(tab, "\n")[[1]]
tmp
the_names <- tab[[3]]
tab
tab[[3]]
library("pdftools")
temp_file <- tempfile()
download.file("http://www.pnas.org/content/suppl/2015/09/16/1510159112.DCSupplemental/pnas.201510159SI.pdf",
temp_file)
txt <- pdf_text(temp_file)
library(stringr)
tab <- txt[2]
tab
txt[3]
class(txt)
length(txt)
tab[[3]]
tab <- txt[2]
tab <- str_split(tab, "\n")[[1]]
the_names <- tab[[3]]
the_names
tab <- tab[4:14]
tab
the_names
txt <- pdf_text(temp_file)
tab <- txt[2]
tab <- str_split(tab, "\n")[[1]]
the_names <- tab[[3]]
tab[[3]]
tab
tab[[1]]
tab[[2]]
tab[[4]]
tab[[3]]
tab[[5]]
tab[[6]]
class(tab)
tab <- tab[5:14]
tab
the_names
class(tab)
txt <- pdf_text(temp_file)
tab <- txt[2]
tab <- str_split(tab, "\n")[[1]]
tab
tab[[3]]
tab[3]
tab[3]
tab[4]
tab <- str_split(tab, "\n")[[1]]
the_names <- tab[3]
the_names_1 <- tab[3]
the_names_2 <- tab[4]
the_names_1
txt <- pdf_text(temp_file)
txt <- txt[2]
tab <- str_split(txt, "\n")[[1]]
tab <- str_split(txt, "\n")[[1]]
the_names_1 <- tab[3]
the_names_2 <- tab[4]
the_names_1
the_names_2
the_names_1 <- str_trim(the_names_1)
the_names_2 <- str_trim(the_names_2)
the_names_1
the_names_2
the_names_1 <-the_names_1 %>% str_trim() %>% str_split("\\s+")
theN_names_1
the_names_1
?str_split
the_names_1 <- the_names_1 %>% str_trim() %>% str_split("\\s+", simplify = TRUE)
the_names_1
the_names_1 <- tab[3]
the_names_1 %>% str_trim() %>% str_split("\\s+", simplify = TRUE)
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]") %>%
str_split("\\s+", simplify = TRUE)
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]", "") %>%
str_split("\\s+", simplify = TRUE)
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]", "")
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]", "") %>%
str_split("\\s{2,}", simplify = TRUE)
the_names_2
the_names_2 %>%
str_trim() %>%
str_split("\\s+", simplify = TRUE)
the_names_1
the_names_2
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s{1}[n|%]", "") %>%
str_split("\\s{2,}", simplify = TRUE)
the_names_1 %>%
str_replace_all(",\\s[n|%]", "") %>%
str_split("\\s{2,}", simplify = TRUE)
the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]", "") %>%
str_split("\\s{2,}", simplify = TRUE)
the_names_2 %>%
str_split("\\s+", simplify = TRUE)
the_names_1 <- the_names_1 %>%
str_trim() %>%
str_replace_all(",\\s[n|%]", "") %>%
str_split("\\s{2,}", simplify = TRUE)
the_names_2 <- the_names_2 %>%
str_split("\\s+", simplify = TRUE)
str_c(the_names_1, the_names_2[-1])
library(dslabs)
data("research_funding_rates")
research_funding_rates
?str_c
str_c(the_names_1, the_names_2[-1], sep = "_")
the_names
the_names_1
the_names_2
str_c(the_names_1[-1], the_names_1, sep = "_")
str_c(the_names_2[-1], the_names_1, sep = "_")
names(research_funding_rates)
the_names_1
the_names_1 %>% str_dup(3)
?str_dup
?str_c
rep(the_names_1,3)
rep(the_names_1, each = 3)
str_dup
?str_dup
str_c()
str_c
?str_c
names(research_funding_rates)
str_c(the_names_1, the_names_2[-1])
str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = "_")
str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = "_") %>%
str_to_lower() %>%
str_replace_all("\\s", "_")
tmp_names <- str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = "_")
tmp_names
the_names <- tmp_names %>%
str_to_lower() %>%
str_replace_all("\\s", "_")
the_names <- c(the_names_2[1], the_names)
identical(the_names, names(research_funding_rates
))
the_names <- c(the_names_2[1], the_names)
identical(the_names, names(research_funding_rates
))
tmp_names <- str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = "_")
the_names <- tmp_names %>%
str_to_lower() %>%
str_replace_all("\\s", "_")
the_names <- c(the_names_2[1], the_names)
the_names
tmp_names <- str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = "_")
the_names <- c(the_names_2[1], tmp_names) %>%
str_to_lower() %>%
str_replace_all("\\s", "_")
identical(the_names, names(research_funding_rates
))
tab <- tab[5:14]
library(tidy3)
library(tidyr)
?extract
?separate
tab
tab[5:14] %>% str_split_fixed()
tab[5:14] %>% str_trim %>% str_split_fixed("\\s+")
tab[5:14] %>% str_trim()
tab[5:14]
tab
tab %>% str_trim
?str_split_fixed
tab <- str_split(txt, "\n")[[1]]
the_names_1 <- tab[3]
the_names_2 <- tab[4]
tab[-1:4]
tab[-c(1:4)]
tab[5:14]
tab %>% str_trim %>% str_split_fixed("\\s+")
tab %>% str_trim %>% str_split("\\s+", fixed = TRUE)
str_split("\\s+", simplify = TRUE)
tab %>% str_trim %>% str_split("\\s+", simplify = TRUE)
tab[4:14] %>% str_trim %>% str_split("\\s+", simplify = TRUE)
tab[5:14] %>% str_trim %>% str_split("\\s+", simplify = TRUE)
tab[5:14] %>% str_trim %>% str_split("\\s{2,}", simplify = TRUE)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame()
?as.data.frame
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame(col.names = the_names)
the_names
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame(the_names) %>%
setNames(the_names)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names)
library(reader)
library(readr)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-discipline, parse_number)
library(tidyverse)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-discipline, parse_number)
the_names
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-discipline, parse_number)
?mutate_all
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-"discipline", parse_number)
?mutate_at
ab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number)), -discipline)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number), -discipline)
research_funding_rates
identical(research_funding_rates, caca)
caca <- tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number), -discipline)
caca <- tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number), -discipline)
tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number), -discipline)
caca <- tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_each(funs(parse_number), -discipline)
?mutate_at
caca <- tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(funs(parse_number), -discipline)
caca <- tab[5:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-1, parse_number)
identical(research_funding_rates, caca)
research_funding_rates
caca
caca <- tab[6:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
as.data.frame() %>%
setNames(the_names) %>%
mutate_at(-1, parse_number)
identical(research_funding_rates, caca)
caca
identical(research_funding_rates[,1], caca[,1])
research_funding_rates[,1] == caca[,1]
class(caca)
class(research_funding_rates)
data.frame
?data.frame
caca <- tab[6:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
data.frame(stringsAsFactors = FALSE) %>%
setNames(the_names) %>%
mutate_at(-1, parse_number)
identical(research_funding_rates, caca)
caca[,1]
research_funding_rates[,1] == caca[,1]
identical(research_funding_rates[1,], caca[,1])
identical(research_funding_rates[,1], caca[,1])
identical(research_funding_rates[,2], caca[,2])
identical(research_funding_rates[,3], caca[,3])
identical(research_funding_rates[,4], caca[,4])
identical(research_funding_rates[,5], caca[,5])
identical(research_funding_rates[,6], caca[,6])
identical(research_funding_rates[,7], caca[,7])
identical(research_funding_rates[,8], caca[,8])
identical(research_funding_rates[,9], caca[,9])
identical(research_funding_rates[,10], caca[,10])
dim(caca)
identical(research_funding_rates[,11], caca[,11])
identical(research_funding_rates[,10], caca[,10])
identical(colnames(research_funding_rates), colnames(caca))
identical(rownames(research_funding_rates), rownames(caca))
cbind(rownames(research_funding_rates), rownames(caca))
caca <- tab[6:14] %>%
str_trim %>%
str_split("\\s{2,}", simplify = TRUE) %>%
data.frame(stringsAsFactors = FALSE, row.names = FALSE) %>%
setNames(the_names) %>%
mutate_at(-1, parse_number)
caca
rownames(caca)
rownames(research_funding_rates)
rownames(research_funding_rates) <- rownames(caca)
identical(research_funding_rates, caca)
rownames(research_funding_rates)
rownames(caca)
class(caca)
class(research_funding_rates)
cbind(rownames(research_funding_rates), rownames(caca))
identical(research_funding_rates[,10], caca[,10])
for(i in 1:10) identical(research_funding_rates[,i], caca[,i])
for(i in 1:10) print(identical(research_funding_rates[,i], caca[,i]))
identical(colnames(research_funding_rates), colnames(caca))
caca
str(caca)
str(research_funding_rates)
args(research_funding_rates)
args(caca)
identical(research_funding_rates, caca)
?identical
all.equal(research_funding_rates, caca)
filename <- system.file("extdata/murders.csv", package = dslabs)
filename <- system.file("extdata/murders.csv", package = "dslabs"")
filename <- system.file("extdata/murders.csv", package = "dslabs")
```{r}
filename <- system.file("extdata/murders.csv", package = "dslabs")
filename
dat <- readLines(filename)
dat
dat %>% head()
strsplit(dat, ",")
dat <- strsplit(lines, ",")
lines <- readLines(filename)
lines %>% head()
dat <- strsplit(lines, ",")
dat %>% head()
Reduce("bind_rows", dat)
Reduce(bind_rows, dat)
dat
Reduce
Reduce(rbind, dat)
class(Reduce(rbind, dat))
library(tidyverse)
library(dslabs)
ds_theme_set()
